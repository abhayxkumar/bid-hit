<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bid-Hit | Product 1</title>
    <link rel="stylesheet" href="product1234.css">
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/fontawesome.min.css"
      integrity="sha384-jLKHWM3JRmfMU0A5x5AkjWkw/EYfGUAGagvnfryNV3F9VqM98XiIH7VBGVoxVSc7"
      crossorigin="anonymous"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700;900&display=swap" rel="stylesheet">
</head>
<body >
    <!-- Header -->
    <div class="back">
        <nav>
          <div class="logo">
            <a href="/index.html"><img src="/image/logo.png" alt="Logo" /></a>
            <a href="/index.html"><h1 class="bid-hit">Bid-Hit</h1></a>
          </div>
          <input type="checkbox" id="click" />
          <label for="click" class="menu-btn">
            <i class="fas fa-bars"></i>
          </label>
          <ul>
            <li><a href="/index.html">HOME</a></li>
            <li><a class="active" href="/products.html">PRODUCTS</a></li>
            <li><a href="/tnc.html">T & C</a></li>
            <li><a href="/aboutus.html">ABOUT US</a></li>
            <li><a href="/contactus.html">CONTACT US</a></li>
            <li><a href="/login.html">LOGIN</a></li>
          </ul>
        </nav>

        <!-- Product Details -->
        <div class="main-container">

          <div class="left-container">
            <div class="img-container">
              <img class="product-img" src="/image/product1.jpg" alt="">
            </div>
          </div>

          <div class="right-container">
            <div class="product-details">
              <h2 class="product-name">Jay Strongwater Ganesh</h2>
              <hr>
              <h3 class="desc-heading">Decription</h3>
              <p class="product-desc">Beautifully Enameled & Jeweled Bronze on gilt base Signed Jay Strongwater 2015, ht. 16” With original box. <br><br> Care Instruction: Clean it with a soft damp cloth</p>
              <p class="product-desc">The colors you see in the images may slightly vary from the product due the fact that every screen has a different color resolution.</p>
              <hr>
              <br>
              <p class="price">Base Price: <span class="base-price">Rs. 1,04,083.00</span></p>
              <br>
              <p class="price">Last Bid Price: <input id="last-bid" class="ipt" type="number" readonly></input> </p>
              <br>
              <label class="price">Bid Price: </label>
              <input class="ipt" type="number" name="bid-price" id="bid-price" placeholder="Enter your bid amount">
              <button onclick="window.location.reload();" class="btn" id="submit">Bid Now</button>

              <!-- Clock -->
              <h1 class="clock-h1" id="clock-heading">Time Left!</h1>
<div id="clockdiv">
  <div>
    <span class="days"></span>
    <div class="smalltext">Days</div>
  </div>
  <div>
    <span class="hours"></span>
    <div class="smalltext">Hours</div>
  </div>
  <div>
    <span class="minutes"></span>
    <div class="smalltext">Minutes</div>
  </div>
  <div>
    <span class="seconds"></span>
    <div class="smalltext">Seconds</div>
  </div>
</div>
            </div>
          </div>

        </div>


        <!-- Footer -->
        <footer>
          <div class="content">
            <div class="left box">
              <div class="upper">
                <div class="topic">About us</div>
                <p>Bid-Hit is a website that provides you with the best auction
                  platform. We are a team of young and enthusiastic
                  people who are dedicated to providing you with the best
                  experience.
                </p>
              </div>
              <div class="lower">
                <div class="topic">Contact us</div>
                <div class="phone">
                  <a href="#"><i class="fas fa-phone-volume"></i>+91 XXXXXXXXXX</a>
                </div>
                <div class="email">
                  <a href="mailto:bidhit@gmail.com"><i class="fas fa-envelope"></i>bidhit@gmail.com</a>
                </div>
              </div>
            </div>
            <div class="middle box">
              <div class="topic">Discover</div>
              <div><a href="/aboutus.html">About Us</a></div>
              <div><a href="/contactus.html">Contact Us</a></div>
              <div><a href="/products.html">Products</a></div>
              <div><a href="/tnc.html">T & C</a></div>
              <div><a href="/login.html">Login</a></div>
            </div>
            <div class="right box">
              <div class="topic">Social Media</div>
                <div class="media-icons">
                  <a href="#"><i class="fab fa-facebook-f"></i></a>
                  <a href="#"><i class="fab fa-instagram"></i></a>
                  <a href="#"><i class="fab fa-twitter"></i></a>
                  <a href="#"><i class="fab fa-youtube"></i></a>
                  <a href="#"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
          </div>
          <div class="bottom">
            <p>Copyright © 2021 <a href="#">Bid-Hit</a> All rights reserved</p>
          </div>
        </footer>


    </div>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-analytics.js";

      const firebaseConfig = {
        apiKey: "AIzaSyCwcXkAZoIfiQfc7iqAFpoa3-a5_cElLHg",
        authDomain: "loginweb-34cad.firebaseapp.com",
        databaseURL: "https://loginweb-34cad-default-rtdb.firebaseio.com",
        projectId: "loginweb-34cad",
        storageBucket: "loginweb-34cad.appspot.com",
        messagingSenderId: "178607050995",
        appId: "1:178607050995:web:0071ffb26a6c5e54236786",
        measurementId: "G-K3XZRNGCK7",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);

      import {
        getDatabase,
        ref,
        set,
        get,
        child,
        update,
        remove,
      } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-database.js";

      const db = getDatabase();

      // Get a reference to the database service
      var bid_price = document.getElementById("bid-price");
      var submit = document.getElementById("submit");
      var last_bid = document.getElementById("last-bid");

      //Select Data Function
      function SelectData() {
        const dbref = ref(db);

        get(child(dbref, "Products" + "/" + "Product-1")).then((snapshot) => {
          if(snapshot.exists()){
            last_bid.value = snapshot.val().BidPrice;
          }
          else{
            last_bid.value = "No Bid Yet";
          }
          })
          .catch((error) => {
            alert("Error: " + error);
          });
      }

      // Insert Data Function
      function insertData() {
        set(ref(db, "Products" + "/" + "Product-1"), {
          BidPrice: bid_price.value,
        })
          .then(() => {
            alert("Bid Successfull");
          })
          .catch((error) => {
            alert("Error: " + error);
          });
      }
      
      // Assign Event Listener to the Submit Button
      submit.addEventListener("click", SelectData);
      submit.addEventListener("click", insertData);
      window.onload = function () {
        SelectData();
      };

      const d = new Date();
      let UTC_hours = d.getUTCHours();
      let UTC_minutes = d.getUTCMinutes();
      let IND_hours = UTC_hours + 5;
      let UTC_time = (UTC_hours+5) + ":" + (UTC_minutes+30);

      if(IND_hours > 10 && IND_hours < 17){
        alert("Bidding is open");
        document.getElementById("submit").disabled = false;
        // document.getElementById("clockdiv").disabled = false;
        initializeClock('clockdiv', IND_hours);
      }
      else{
        alert("Bidding is closed");
        document.getElementById("submit").disabled = true;
        // document.getElementById("clockdiv").style.display="none";
        // document.getElementById("clock-heading").style.display="none";
      }

      //clock
      function getTimeRemaining(endtime) {
  const total = Date.parse(endtime) - Date.parse(new Date());
  const seconds = Math.floor((total / 1000) % 60);
  const minutes = Math.floor((total / 1000 / 60) % 60);
  const hours = Math.floor((total / (1000 * 60 * 60)) % 24);
  const days = Math.floor(total / (1000 * 60 * 60 * 24));
  
  return {
    total,
    days,
    hours,
    minutes,
    seconds
  };
}

function initializeClock(id, endtime) {
  const clock = document.getElementById(id);
  const daysSpan = clock.querySelector('.days');
  const hoursSpan = clock.querySelector('.hours');
  const minutesSpan = clock.querySelector('.minutes');
  const secondsSpan = clock.querySelector('.seconds');

  function updateClock() {
    const t = getTimeRemaining(endtime);

    daysSpan.innerHTML = t.days;
    hoursSpan.innerHTML = ('0' + t.hours).slice(-2);
    minutesSpan.innerHTML = ('0' + t.minutes).slice(-2);
    secondsSpan.innerHTML = ('0' + t.seconds).slice(-2);

    if (t.total <= 0) {
      clearInterval(timeinterval);
    }
  }

  updateClock();
  const timeinterval = setInterval(updateClock, 1000);
}

const deadline = new Date(Date.parse(new Date()) + 4 * 60 * 60 * 1000);
initializeClock('clockdiv', deadline);

    </script>

</body>
</html>